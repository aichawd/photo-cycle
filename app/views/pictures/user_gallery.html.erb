<head>
  <link rel="stylesheet" href="user_gallery.scss">
</head>

<div class='user-banner'>
  <div class="banner-container">
    <h1>
      <% if @user.photo.attached? %>
                <%= cl_image_tag @user.photo.key, class: "avatar-large"%>
      <% end %>
      <%= @user.first_name %> <%= @user.last_name %>
          <button type="button" class="collab-button" data-bs-toggle="modal" data-bs-target="#collabModal">
            Collaborate ‚Üí
          </button>
    </h1>

    <h3>Bio: artichette, tichette de 2, tichette de 3, tichette de 21, michette, <br> tchiledeque, mique,sganabadarlane, r√©sin√© et raitournelle..</h3>
    <p>
        <%= @user_pictures.count %> masterpieces
        <% if @user == current_user %>
          <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#newPhotoModal">
            Add photo
          </button>
        <% else %>
          <%= link_to 'contact', chatroom_path(@single_chatroom) %>
        <% end %>
        Mat√©riel: Kidizoom ü•≤
    </p>
    <h3 class="tags">My Tags: </h3>
  </div>
</div>

<%= render 'modals' %>

<hr>

<div class="photo-behavior" data-controller="view-photo">
  <ul>
    <% @user_pictures.each do |pic| %>
      <li>
        <a data-action="click->view-photo#view">
          <%= cl_image_tag pic.photo.key %>
        </a>
        <% if @user == current_user %>
          <div class="dropdown">
            <a  type="button" class="dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i id="edit_pencil" class="fas fa-edit"></i>
            </a>
            <div class="dropdown-menu">
              <%= link_to "Edit", "#", class: "dropdown-item" %>
              <%= link_to "Delete",
                    picture_path(pic),
                    method: :delete,
                    data: { confirm: "Are you sure you want to delete this picture? This action is irreversible." },
                    class: "dropdown-item" %>
            </div>
          </div>
        <% end %>
        <div id="gallery_modal" class="modal" data-controller="modal" data-view-photo-target="modal">
          <div class="modal-dialog">
              <div id="gallery_modal_content" class="modal-content">
                <a class="link-secondary" data-action="click->modal#close">Close</a>
                <div data-modal-target="photo">
                </div>
              </div>
          </div>
        </div>
      </li>
    <% end %>
  </ul>
</div>
